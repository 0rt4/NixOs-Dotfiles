# Dotfiles NixOS

**Hello**, this project represents my journey with **NixOS**. A completely reproducible, declarative, and customized operating system that adapts to my development needs and daily workflow as a programmer.

This is my personal configuration, designed in a **modular** way, thinking about properly distributing responsibilities across sections (separation of concerns) to achieve **long-term maintainable** code.

# Project Architecture

```
NIXOS-DOTFILES/
â”œâ”€â”€ home/orta/
â”‚ â”œâ”€â”€ programs/
â”‚ â”œâ”€â”€ themes/
â”‚ â”‚ â”œâ”€â”€ Cursor.nix
â”‚ â”‚ â”œâ”€â”€ default.nix
â”‚ â”‚ â”œâ”€â”€ GTK.nix
â”‚ â”‚ â””â”€â”€ QT.nix
â”‚ â”œâ”€â”€ default.nix
â”‚ â””â”€â”€ packages.nix
â”œâ”€â”€ hosts/laptop/
â”‚ â”œâ”€â”€ default.nix
â”‚ â””â”€â”€ hardware-configur...
â”œâ”€â”€ modules/
â”‚ â”œâ”€â”€ desktops/
â”‚ â”‚ â”œâ”€â”€ base.nix
â”‚ â”‚ â”œâ”€â”€ cosmic.nix
â”‚ â”‚ â”œâ”€â”€ default.nix
â”‚ â”‚ â”œâ”€â”€ gnome.nix
â”‚ â”‚ â”œâ”€â”€ kde-plasma.nix
â”‚ â”‚ â””â”€â”€ niri.nix
â”‚ â”œâ”€â”€ scripts/
â”‚ â””â”€â”€ services/
â”œâ”€â”€ devflake.nix
â”œâ”€â”€ flake.lock
â””â”€â”€ flake.nix
```

## Design Decisions

The logic behind this directory structure is based on modularity and clear separation of responsibilities:

### `home/`

This directory centralizes individual (declarative) configurations for each user. It's subdivided as follows:

*   **`programs/`**: Contains specific **declarations** for each application individually.
*   **`themes/`**: Manages user-specific **configuration** of themes, including **cursor** and **icon** settings for various applications.

Additionally, the main files within `home/` define the general scope of the user:

*   **`default.nix`**: Defines the user's global **configuration**.
*   **`packages.nix`**: Lists programs installed specifically for that user.

~**(Consider these as examples of how to distribute configurations)**~

### `hosts/`

Here you'll find specific **declarations** for each physical machine (host), allowing detailed granularity based on hardware:

*   Hosts optimizations based on each machine's specifications.
*   Includes the `hardware-configuration.nix` file automatically generated by NixOS for that specific device.

### `modules/`

This directory groups reusable components and shared system configurations:

*   **`desktops/`**: **Declares** desktop environment configurations (GNOME, KDE Plasma, etc.) that can be activated according to user preference.
*   **`scripts/`**: Stores terminal scripts.
*   **`services/`**: Contains precise **declarations** for system services such as **audio**, **network**, various **drivers**, among others.

### `flake.nix` and `flake.lock`

These files manage global dependencies and the base **configuration** needed for the entire system to function reproducibly. They also allow **including applications not found in the main Nixpkgs repositories** through the use of third-party *flakes*.

## Why this structure and not another?

After trying various approaches (monolithic file with which I started, flat structures, among others), this organization has proven to be the most **scalable and maintainable**. It allows:

    1.- Reusability: Modules can be shared between hosts

    2.- Clarity: It's easy to find where to modify something

    3.- Testing: Components can be individually enabled/disabled

## How do I start using this configuration?

    - Clone the repository to /etc/nixos or to your home (with symbolic links)

    - Adjust hosts/ for your specific hardware

    - Customize home/ with your preferred programs and themes

    - Execute sudo nixos-rebuild switch --flake .#host-name

## What if I'm new to NixOS?

This configuration is advanced but designed to be understandable. I recommend:

    1.- Familiarize yourself with the basic concepts of NixOS

    2.- Explore one module at a time

    3.- Modify gradually instead of changing everything at once

## How do I add a new program?

The first question that may arise is where to declare your applications/programs/libraries. Where to declare them depends on the scope:

    - For a particular machine: Add it to the corresponding host (specific drivers can be placed in modules/services)

    - Depending on the enabled Desktop Environment: In its respective configuration file in modules/desktops/desktop.nix

    - For a specific user: Add it to home/user/packages.nix

    - Declaring a custom configuration: Create a file in home/user/programs/

    - Fonts are considered global for all DEs you enable, so you can declare them in modules/desktops/base.nix

## Why NixOS?

    - Reproducibility: Rebuild exactly the same system at any time

    - Safe Rollbacks: If something fails, return to the previous configuration with a reboot

    - Portability: Easy migration between different machines

    - Transparency: Everything is versioned and documented

    - Precision: Avoid dependency hell and declare precisely what's needed

## ğŸ¤ Contributions and Adaptation

Feel free to fork this repository and adapt it to your needs. The beauty of NixOS is in its customization, and this structure is just a starting point. Each user has unique workflows, and the system should adapt to them, not the other way around.

---

*This configuration is constantly evolving. What today is a separate module, tomorrow might be better integrated, as this **Dotfile** grows alongside me as a programmer, applying best practices that I personally learn along the way. However, the priority will always be to maintain clarity and long-term maintainability.*

*The main branch will always try to maintain the standard configuration, so you shouldn't worry if I add personal configurations beyond those already established, which I've left as templates both for myself and for anyone who forks it to use as an example*